<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="dark">
  <title>NewsWidget</title>
  <link rel="stylesheet" href="style-v9.css">
</head>
<body>
  <!-- 顶部标签页 -->
  <nav class="tabs">
    <button class="tab active" data-tab="hot">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
        </svg>
      </span>
      <span class="tab-text">热点</span>
    </button>
    <button class="tab" data-tab="tech">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="14" rx="2"/>
          <path d="M8 21h8M12 17v4"/>
        </svg>
      </span>
      <span class="tab-text">科技</span>
    </button>
    <button class="tab" data-tab="finance">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
      </span>
      <span class="tab-text">财经</span>
    </button>
    <button class="tab" data-tab="general">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/>
          <path d="M18 14h-8M15 18h-5M10 6h8v4h-8V6Z"/>
        </svg>
      </span>
      <span class="tab-text">综合</span>
    </button>
    <button class="tab" data-tab="favorites">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
        </svg>
      </span>
      <span class="tab-text">收藏</span>
      <span class="badge" id="favBadge">0</span>
    </button>
    <button class="tab" data-tab="stats">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 3v18h18"/>
          <path d="M18 17V9M13 17V5M8 17v-3"/>
        </svg>
      </span>
      <span class="tab-text">统计</span>
    </button>
    <button class="tab" data-tab="settings">
      <span class="tab-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
        </svg>
      </span>
      <span class="tab-text">设置</span>
    </button>
    <button class="refresh-all-btn" id="refreshAllBtn" title="刷新全部">
      <span>↻</span>
    </button>
  </nav>

  <!-- 搜索栏 -->
  <div class="search-bar" style="display: none;">
    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="搜索新闻标题... (⌘F)">
      <button class="search-btn" id="searchBtn" title="搜索">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
      </button>
      <button class="clear-search-btn" id="clearSearchBtn" style="display: none;" title="清除">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- 卡片轮播容器 -->
  <div class="carousel-container" id="carouselContainer">
    <!-- 卡片内容 -->
    <div class="card-wrapper" id="cardWrapper">
      <!-- 加载状态 -->
      <div class="loading-state" id="loadingState">
        <div class="spinner"></div>
        <div class="loading-text">加载中...</div>
      </div>
      
      <!-- 卡片容器 -->
      <div class="card-container" id="cardContainer">
        <!-- 动态生成卡片 -->
      </div>
    </div>
  </div>
  
  <!-- 统计面板 -->
  <div class="stats-panel" id="statsPanel" style="display: none;">
    <div class="stats-header">
      <div>
        <h2>📊 数据统计</h2>
        <div class="stats-time" id="statsTime"></div>
      </div>
    </div>
    
    <div class="stats-grid">
      <!-- 总览卡片 -->
      <div class="stat-card">
        <div class="stat-icon">📰</div>
        <div class="stat-value" id="totalNews">0</div>
        <div class="stat-label">今日新闻</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">🔥</div>
        <div class="stat-value" id="totalSources">0</div>
        <div class="stat-label">数据源</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">⭐</div>
        <div class="stat-value" id="totalFavorites">0</div>
        <div class="stat-label">收藏数</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">👁️</div>
        <div class="stat-value" id="totalViews">0</div>
        <div class="stat-label">浏览量</div>
      </div>
    </div>
    
    <!-- 热词云图 -->
    <div class="stats-section">
      <h3>🔥 今日热词</h3>
      <div class="word-cloud" id="wordCloud">
        <!-- 动态生成 -->
      </div>
    </div>
    
    <!-- 分类分布 -->
    <div class="stats-section">
      <h3>📊 分类分布</h3>
      <div class="category-chart" id="categoryChart">
        <!-- 动态生成 -->
      </div>
    </div>
    
    <!-- 数据源活跃度 -->
    <div class="stats-section">
      <h3>📈 数据源活跃度</h3>
      <div class="source-chart" id="sourceChart">
        <!-- 动态生成 -->
      </div>
    </div>
  </div>
  
  <!-- 设置面板 -->
  <div class="settings-panel" id="settingsPanel" style="display: none;">
    <div class="settings-header">
      <h2>⚙️ 设置</h2>
    </div>
    
    <div class="settings-content">
      <!-- 主题设置 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">🎨 主题</div>
          <div class="setting-desc">选择应用的外观主题</div>
        </div>
        <select id="themeSelect" class="setting-select">
          <option value="dark">暗色</option>
          <option value="light">亮色</option>
          <option value="auto">跟随系统</option>
        </select>
      </div>
      
      <!-- 开机自启动 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">🚀 开机自启动</div>
          <div class="setting-desc">系统启动时自动运行小组件</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="autostartToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <!-- 刷新间隔 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">🔄 刷新间隔</div>
          <div class="setting-desc">自动刷新新闻的时间间隔</div>
        </div>
        <select id="refreshInterval" class="setting-select">
          <option value="300">5 分钟</option>
          <option value="600" selected>10 分钟</option>
          <option value="1800">30 分钟</option>
          <option value="3600">1 小时</option>
        </select>
      </div>
      
      <!-- 导出收藏 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">⭐ 导出收藏</div>
          <div class="setting-desc">将收藏的新闻导出为 JSON 文件</div>
        </div>
        <button class="setting-btn" id="exportFavBtn">导出</button>
      </div>
      
      <!-- 清除数据 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">🗑️ 清除数据</div>
          <div class="setting-desc">清除所有收藏和浏览记录</div>
        </div>
        <button class="setting-btn danger" id="clearDataBtn">清除</button>
      </div>
      
      <!-- 关于 -->
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">ℹ️ 关于</div>
          <div class="setting-desc">
            版本：v11.0 (增强版)<br>
            数据源：22 个<br>
            开发：OpenClaw AI Assistant
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 底部指示器 -->
  <div class="footer">
    <div class="indicators" id="indicators">
      <!-- 动态生成指示器 -->
    </div>
    <div class="footer-info">
      <span id="updateTime">--:--</span>
      <span class="separator">·</span>
      <span id="countdown">10:00</span>
    </div>
  </div>
  
  <!-- Toast -->
  <div class="toast" id="toast" style="display: none;"></div>
  
  <!-- 使用 ES6 模块 -->
  <script type="module" src="app-v10.js"></script>
</body>
</html>
